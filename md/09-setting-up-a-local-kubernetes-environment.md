# Урок 9. Настройка локальной среды Kubernetes


## Введение в локальные среды Kubernetes

Настройка локальной среды Kubernetes позволяет экспериментировать с функциями Kubernetes и развертывать приложения без необходимости в облачном провайдере. В этом уроке мы будем использовать **Minikube** и **Docker Desktop** для создания локального кластера Kubernetes. Оба варианта популярны для локальной разработки и тестирования.

## Вариант 1. Установка Minikube

**Minikube** — это инструмент, который создает локальный кластер Kubernetes на вашем компьютере. Он запускает кластер Kubernetes с одним узлом в виртуальной машине (ВМ) или контейнере, в зависимости от вашей настройки.

### Шаг 1. Предварительные условия

Перед установкой Minikube убедитесь, что у вас есть следующее:

- **Программное обеспечение для виртуализации**: для запуска Minikube требуется гипервизор. Вы можете использовать VirtualBox, VMware, HyperKit (для macOS) или Hyper-V (для Windows).

- **kubectl**. Для взаимодействия с кластером необходим инструмент командной строки Kubernetes, `kubectl`. Вы можете установить его, следуя [руководству по установке kubectl](https://kubernetes.io/docs/tasks/tools/install-kubectl/).

### Шаг 2. Установка Minikube

1. **Скачайте Minikube**:
- Посетите [страницу релизов Minikube](https://github.com/kubernetes/minikube/releases) и загрузите установщик для вашей операционной системы.

2. **Установите Minikube**:
- Следуйте инструкциям по установке для вашей ОС:
- **Windows**. Используйте установщик или Chocolatey.
- **macOS**. Используйте Homebrew или загрузите двоичный файл.
- **Linux**. Загрузите двоичный файл и переместите его в `/usr/local/bin`.

### Шаг 3. Запуск Minikube

1. Откройте терминал и запустите Minikube с помощью следующей команды:

```bash
minikube start
```

Эта команда создаст локальный кластер Kubernetes и настроит `kubectl` для его использования.

### Шаг 4: Проверка установки Minikube

Чтобы убедиться, что Minikube запущен, используйте:

```bash
minikube status
```

Вы должны увидеть вывод, указывающий на то, что кластер запущен.

## Вариант 2. Установка Docker Desktop

**Docker Desktop** включает встроенный кластер Kubernetes, который можно включить несколькими щелчками мыши. Этот вариант идеален, если вы уже используете Docker Desktop для разработки контейнеров.

### Шаг 1. Установка Docker Desktop

1. **Скачать Docker Desktop**:
- Посетите [страницу загрузки Docker Desktop](https://www.docker.com/products/docker-desktop) и загрузите установщик для вашей операционной системы.

2. **Установить Docker Desktop**:
- Запустите установщик и следуйте инструкциям на экране.

### Шаг 2. Запуск Kubernetes

1. Откройте Docker Desktop и перейдите в **Настройки** (или **Предпочтения** в macOS).

2. Перейдите на вкладку **Kubernetes**.

3. Установите флажок **Включить Kubernetes**.

4. Нажмите **Применить и перезапустить**. Docker Desktop установит и настроит Kubernetes.

### Шаг 3. Проверка установки Docker Desktop

Чтобы проверить, запущен ли Kubernetes, можно использовать следующую команду:

```bash
kubectl cluster-info
```

Вы должны увидеть информацию о главном узле Kubernetes и службах, запущенных в кластере.

## Изучение основных команд Kubernetes

После настройки локальной среды Kubernetes вы можете начать использовать `kubectl` для взаимодействия с кластером. Вот несколько основных команд, с которых можно начать:

### 1. **Проверка состояния кластера**

Чтобы проверить состояние кластера, используйте:

```bash
kubectl cluster-info
```

### 2. **Список узлов**

Чтобы получить список узлов в кластере, выполните:

```bash
kubectl get nodes
```

### 3. **Создание простого модуля**

Вы можете создать простой модуль с помощью следующей команды:

```bash
kubectl run my-nginx --image=nginx --restart=Never
```

Эта команда создает модуль с именем `my-nginx`, на котором запущен веб-сервер Nginx.

### 4. **Список подов**

Чтобы увидеть поды, работающие в вашем кластере, используйте:

```bash
kubectl get pods
```

### 5. **Описание подов**

Чтобы получить подробную информацию о конкретном поде, используйте:

```bash
kubectl describe pod my-nginx
```

### 6. **Удалить поды**

Чтобы удалить под, выполните:

```bash
kubectl delete pod my-nginx
```

### 7. **Доступ к панели мониторинга Kubernetes**

Если вы используете Minikube, вы можете получить доступ к панели мониторинга Kubernetes с помощью следующей команды:

```bash
minikube dashboard
```

Эта команда открывает панель мониторинга Kubernetes в вашем веб-браузере, предоставляя графический интерфейс для управление вашим кластером.

## Заключение

В этом уроке вы узнали, как настроить локальную среду Kubernetes с помощью Minikube или Docker Desktop. Вы также изучили основные команды `kubectl` для взаимодействия с вашим кластером Kubernetes. Теперь, когда ваша локальная среда Kubernetes готова, вы можете начать развертывание и управление контейнерными приложениями. В следующем уроке мы более подробно рассмотрим развертывание вашего первого приложения в Kubernetes.
